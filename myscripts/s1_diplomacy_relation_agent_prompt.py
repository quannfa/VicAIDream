"""
本脚本用于探索外交关系的agent的prompt

# 外交关系评论家agent

外交关系评论家agent是一个能够向游戏API索取做出评论的信息，做出评论并解释，熟悉外交关系系统并做出关系变化的预测的agent。
每一个游戏周期，外交关系评论家agent会向游戏API索取当前世界的基本信息，包括重大外交决策（外交行动、博弈）和当前的外交关系以及重大科技、军事、社会和经济事件。根据这些基本信息，外交关系评论家挑选自己要做出评论的几个重要事件。围绕这些重要时间，agent逐个分析自己做出评论需要的信息，并通过API进行索取。在获取到信息后，agent会做出评论，并解释自己的评论。在评论的过程中，agent会根据自己的知识库，对外交关系的变化进行预测。

## 外交关系评论家的prompt设计

外交关系评论家的prompt设计，主要是为了让agent能够扮演一个外交关系评论者，能够向游戏API索取做出评论的信息，做出评论并解释，熟悉外交关系系统并做出关系变化的预测。

prompt应当包括以下几个部分：
1. 角色描述：外交关系评论家，能够向游戏API索取做出评论的信息，做出评论并解释，熟悉外交关系系统并做出关系变化的预测。
2. 基础信息索取请求：引导AI向游戏API索取当前世界的基本信息，包括重大外交决策（外交行动、博弈）和当前的外交关系以及重大科技、军事、社会和经济事件。获取这些信息能够帮助AI挑选自己要做出评论的几个重要事件。
3. 信息分析：引导AI挑选自己要做出评论的几个重要事件。
4. 评论：引导AI做出评论，并解释自己的评论。
5. 预测：引导AI根据自己的知识库，对外交关系的变化进行预测。

prompt应当具有以下几个功能：
1. 描述AI的任务
2. 指引AI的推理逻辑
3. 规范AI的输出格式
"""
#%% init project env
import EsyPro
sfs = EsyPro.ScriptResultManager('zqf',locals(), version=0)

#%% prompt difination

def roel_prompt():
    prompt= "你是一个精通历史外交关系推理的外交关系评论家，你正在对一段模拟历史进行评论，你喜欢这种模拟。这种模拟按照周期进行，你喜欢在每一个周期的开始询问当前的世界基本信息，然后筛选值得评论的事件，发表评论并解释，最后预测外交关系的变化。你会等待我的指令，然后按照指令参与模拟。现在你是一个精通历史外交关系推理的外交关系评论家，拥有深厚的历史知识储备，熟悉古今中外各种外交事件的来龙去脉以及处理方式，对国际关系理论、外交政策制定、国际法等相关知识了如指掌。你擅长运用这些专业知识，在模拟历史的环境中，对各国之间的外交动态进行精准分析和评论。你清楚地知道，这种模拟是按照周期进行的，在每一个周期的开始，你会主动询问当前的世界基本信息，包括重大外交决策（外交行动、博弈）、当前的外交关系以及重大科技、军事、社会和经济事件等，这是你发挥专业能力进行评论的基础。你善于从这些信息中筛选出值得评论的重要事件，凭借你的专业知识和敏锐洞察力，发表独到的评论并详细解释，同时还能结合当前形势和历史经验，对外交关系的变化进行准确预测。现在周期并未开始，处于准备阶段，请你仅用一段简洁的话，复述你对自身身份的理解，不要涉及其他内容，也不要采取任何行动。"
    return prompt

def base_info_request_prompt(period=0, word_info_json=None):
    """
    AI返回的信息：
        {
            "当前主要国家之间的关系": "{等待信息}",
            "当前主要国家之间的外交协议": "{等待信息}",
            "当前主要国家的经济情况": "{等待信息}",
            "国际组织与多边机构的活动": "{等待信息}",
            "军事与科技发展": "{等待信息}",
            "社会与文化事件": "{等待信息}",
            "环境与能力建设": "{等待信息}"
        }

    """
    
    prompt = f"""现在开始第{period+1}个周期的基础信息获取阶段，请按照我的指令参与模拟：作为外交关系评论家你对当前周期的世界基本信息还一无所知。由于你必须根据本周期的世界基本情况展开评论，因此你需要向游戏 API 索取当前世界的基本信息，以便挑选你想评论的重大事件。你要获取的信息首先应当包括重大事件的名称。此外，你还可以根据自己的历史知识和分析需求，提出其他关于世界基本情况的信息需求。"""+"""请以 JSON 格式给出你想要索取的信息的模板，其中具体信息用‘{等待信息}’替换,按照以下格式提供你需要的json的格式：
{
"当前主要国家之间的关系": "{等待信息}",
"当前主要国家之间的外交协议": "{等待信息}",
”当前主要国家的经济情况“: "{等待信息}",
......
}
上述格式只是个模板，请你学习它的结构并根据你的需求提出接送格式的问题"""
    return prompt




#%% main
if __name__ == '__main__':
    print(f'start {__file__}')

    for period in range(1):
        print(roel_prompt())
        print(base_info_request_prompt(period=period))
        print('-'*50)
    
    #%% 第一步初始化ollama模型，身份描述
    
    import ollama
    res=ollama.chat(model="deepseek-r1:8b-40k",stream=False,messages=[{"role": "user","content": f"{roel_prompt()}"}],options={"temperature":0})
    print(res)
    
    #%% 
    
    
    
    #%% end script
    print(f'end {__file__}')
